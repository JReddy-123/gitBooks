<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>GB&M â€“ Marketplace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles/default.css">
  <link rel="stylesheet" href="styles/marketplace.css">
</head>
<body>
<header>
  <div class="header-wrap">
    <a class="brand" href="index.html">
      <div class="logo">GB</div>
      <div class="title">GitBooks & MORE</div>
    </a>
    <div></div>
    <nav>
      <a href="new-listing.html">Sell an Item</a>
      <a href="signup.html">Account</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <aside class="panel">
    <h3 class="no-margin-top">Filters</h3>
    <div class="search">
      <input id="q" placeholder="Search (e.g., calculus, TI-84, ITSC 3146)" />
    </div>
    <label>Category</label>
    <select id="cat">
      <option value="">All</option>
      <option>Textbooks</option>
      <option>Calculators</option>
      <option>Lab Kits</option>
      <option>Other</option>
    </select>
    <div class="price-filters">
      <div>
        <label>Min ($)</label>
        <input id="min" type="number" min="0" placeholder="0" />
      </div>
      <div>
        <label>Max ($)</label>
        <input id="max" type="number" min="0" placeholder="999" />
      </div>
    </div>
    <button id="clear" class="btn-clear">Clear</button>
  </aside>

  <section class="panel">
    <h2 class="no-margin-bottom">Marketplace</h2>
    <div id="count" class="empty"></div>
    <div id="grid" class="grid"></div>
    <div id="empty" class="empty hidden">No listings match your search criteria.</div>
  </section>
</main>

<script>
  //includes optional isbn/course
  const items=[
    {id:1,title:'Data Structures & Algorithms (4th ed.)',cat:'Textbooks',price:35,isbn:'9780134685991',course:'ITSC 2214'},
    {id:2,title:'TI-84 Plus CE Calculator',cat:'Calculators',price:45},
    {id:3,title:'Physics 1101 Lab Kit',cat:'Lab Kits',price:20,course:'PHYS 1101'},
    {id:4,title:'Discrete Math Textbook',cat:'Textbooks',price:25,course:'ITSC 2181'},
    {id:5,title:'Statistics for Engineers',cat:'Textbooks',price:30,course:'STAT 2122'},
    {id:6,title:'Arduino Starter Kit',cat:'Other',price:28}
  ];

  const els={q:document.getElementById('q'),cat:document.getElementById('cat'),min:document.getElementById('min'),
             max:document.getElementById('max'),grid:document.getElementById('grid'),
             empty:document.getElementById('empty'),count:document.getElementById('count'),clear:document.getElementById('clear')};

  function render(list){
    els.grid.innerHTML=list.map(x=>`
      <article class="item">
        <div class="thumb">${x.cat}</div>
        <div class="content">
          <div>${x.title}</div>
          <div class="badges">
            <span class="badge">${x.cat}</span>
            ${x.course ? `<span class="badge">${x.course}</span>`:''}
            ${x.isbn ? `<span class="badge">ISBN ${x.isbn}</span>`:''}
          </div>
          <div class="price">$${x.price}</div>
        </div>
      </article>`).join('');
    els.count.textContent=`${list.length} item${list.length!==1?'s':''} found`;
    els.empty.style.display=list.length?'none':'block';
  }

  function applyFilters(){
    const q=els.q.value.trim().toLowerCase();
    const cat=els.cat.value; const min=parseFloat(els.min.value||'0'); const max=parseFloat(els.max.value||'999999');
    const filtered=items.filter(i=>{
      const hay=[i.title,i.course,i.isbn].filter(Boolean).join(' ').toLowerCase();
      const okQ=!q || hay.includes(q);
      const okC=!cat || i.cat===cat;
      const okP=i.price>=min && i.price<=max;
      return okQ && okC && okP;
    });
    render(filtered);
  }

  [els.q,els.cat,els.min,els.max].forEach(el=>el.addEventListener('input',applyFilters));
  els.clear.onclick=()=>{els.q.value='';els.cat.value='';els.min.value='';els.max.value='';applyFilters();}
  render(items);
</script>
</body>
</html>